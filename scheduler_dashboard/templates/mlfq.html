<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MLFQ - Multi-Level Feedback Queue</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }

        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-y: auto;
            background: #f1f5f9;
        }

        .algo-page {
            padding: 2rem 3rem 5rem 3rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 1.5rem;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .algo-hero {
            background: linear-gradient(135deg, #7c3aed 0%, #a78bfa 100%);
            color: white;
            padding: 2.5rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            position: relative;
            border: 3px solid #5b21b6;
        }

        .algo-hero h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }

        .algo-hero .subtitle {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .btn-source {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.5);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-source:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .btn-source svg {
            width: 18px;
            height: 18px;
        }

        .content-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            border: 2px solid #cbd5e1;
        }

        .content-section h2 {
            color: #5b21b6;
            margin-bottom: 1.25rem;
            font-size: 1.5rem;
            border-bottom: 3px solid #7c3aed;
            padding-bottom: 0.75rem;
        }

        .content-section h3 {
            color: #1e293b;
            margin: 1.5rem 0 1rem 0;
            font-size: 1.2rem;
        }

        .content-section p {
            line-height: 1.9;
            color: #475569;
            margin-bottom: 1rem;
        }

        .content-section ul,
        .content-section ol {
            line-height: 1.9;
            color: #475569;
            margin-bottom: 1rem;
            padding-left: 1.5rem;
        }

        .content-section li {
            margin-bottom: 0.75rem;
        }

        .formula-box {
            background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%);
            border: 2px solid #7c3aed;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            margin: 1.5rem 0;
        }

        .formula-box .formula {
            font-size: 1.3rem;
            font-weight: 700;
            color: #4c1d95;
            font-family: 'Courier New', monospace;
        }

        .formula-box .formula-desc {
            font-size: 0.95rem;
            color: #64748b;
            margin-top: 0.75rem;
        }

        .example-box {
            background: #fffbeb;
            border: 2px solid #f59e0b;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .example-box h4 {
            color: #b45309;
            margin: 0 0 1rem 0;
        }

        .example-box p,
        .example-box li {
            color: #78350f;
        }

        .math-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .math-table th,
        .math-table td {
            border: 2px solid #cbd5e1;
            padding: 0.75rem;
            text-align: center;
        }

        .math-table th {
            background: #f1f5f9;
            font-weight: 600;
        }

        .math-table tr:nth-child(even) {
            background: #f8fafc;
        }

        .info-box {
            background: #eff6ff;
            border: 2px solid #3b82f6;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .info-box strong {
            color: #1d4ed8;
        }

        .info-box p {
            color: #1e40af;
            margin: 0;
        }

        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .pros,
        .cons {
            padding: 1.25rem;
            border-radius: 12px;
        }

        .pros {
            background: #f0fdf4;
            border: 2px solid #22c55e;
        }

        .cons {
            background: #fef2f2;
            border: 2px solid #ef4444;
        }

        .pros h4 {
            color: #16a34a;
            margin: 0 0 0.75rem 0;
        }

        .cons h4 {
            color: #dc2626;
            margin: 0 0 0.75rem 0;
        }

        .pros ul,
        .cons ul {
            margin: 0;
            padding-left: 1.25rem;
        }

        .queue-diagram {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .queue {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-radius: 8px;
            color: white;
            font-weight: 600;
        }

        .queue.q0 {
            background: linear-gradient(90deg, #dc2626 0%, #ef4444 100%);
            border: 2px solid #b91c1c;
        }

        .queue.q1 {
            background: linear-gradient(90deg, #f59e0b 0%, #fbbf24 100%);
            border: 2px solid #d97706;
        }

        .queue.q2 {
            background: linear-gradient(90deg, #3b82f6 0%, #60a5fa 100%);
            border: 2px solid #2563eb;
        }

        .rule-box {
            background: #f0fdf4;
            border: 2px solid #22c55e;
            border-radius: 8px;
            padding: 1rem;
            margin: 0.75rem 0;
        }

        .rule-box strong {
            color: #166534;
        }
    </style>
</head>

<body>
    <div class="algo-page">
        <a href="/" class="back-link">← Back to Simulator</a>

        <div class="algo-hero">
            <h1>Multi-Level Feedback Queue (MLFQ)</h1>
            <p class="subtitle">The Best of Both Worlds: Response Time + Turnaround Time</p>
            <a href="https://github.com/gauri-dhanakshirur/CFS-Simulation/tree/main/MLFQ" target="_blank"
                class="btn-source">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path
                        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" />
                </svg>
                View Source Code
            </a>
        </div>

        <section class="content-section">
            <h2>Introduction</h2>
            <p><strong>Multi-Level Feedback Queue (MLFQ)</strong> is one of the most sophisticated CPU scheduling
                algorithms, used in Windows, macOS, and Linux variants. It uses multiple ready queues with different
                priority levels and allows processes to move between queues based on their behavior.</p>
            <p>MLFQ <em>learns</em> from process behavior: interactive processes (short bursts) stay in high-priority
                queues, while CPU-bound processes (long bursts) get demoted to lower queues.</p>
        </section>

        <section class="content-section">
            <h2>Queue Structure</h2>
            <div class="queue-diagram">
                <div class="queue q0">
                    <span style="min-width: 80px;">Queue 0</span>
                    <span>Highest Priority | TQ = 8ms | Round Robin | Interactive/New processes</span>
                </div>
                <div class="queue q1">
                    <span style="min-width: 80px;">Queue 1</span>
                    <span>Medium Priority | TQ = 16ms | Round Robin | Demoted from Q0</span>
                </div>
                <div class="queue q2">
                    <span style="min-width: 80px;">Queue 2</span>
                    <span>Lowest Priority | FCFS | CPU-bound processes</span>
                </div>
            </div>
        </section>

        <section class="content-section">
            <h2>The 5 MLFQ Rules</h2>
            <div class="rule-box"><strong>Rule 1:</strong> If Priority(A) > Priority(B), A runs (B doesn't)</div>
            <div class="rule-box"><strong>Rule 2:</strong> If Priority(A) = Priority(B), A and B run in Round Robin
            </div>
            <div class="rule-box"><strong>Rule 3:</strong> When a new process arrives, it starts at highest priority
                queue</div>
            <div class="rule-box"><strong>Rule 4:</strong> If a process uses its entire time slice, it is demoted to
                next lower queue</div>
            <div class="rule-box"><strong>Rule 5:</strong> After time period S, boost ALL processes to top queue
                (prevents starvation)</div>
        </section>

        <section class="content-section">
            <h2>Detailed Example</h2>
            <div class="example-box">
                <h4>Problem Setup</h4>
                <p>Queues: Q0 (TQ=8), Q1 (TQ=16), Q2 (FCFS). Boost period S = 100ms</p>
                <p>Processes: P1 (burst=40), P2 (burst=5), all arrive at t=0</p>
            </div>

            <table class="math-table">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Event</th>
                        <th>Q0</th>
                        <th>Q1</th>
                        <th>Q2</th>
                        <th>Running</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>0</td>
                        <td>Both enter Q0</td>
                        <td>P1,P2</td>
                        <td>-</td>
                        <td>-</td>
                        <td>P1</td>
                    </tr>
                    <tr>
                        <td>0-5</td>
                        <td>P2 runs (5<8), completes</td>
                        <td>P1</td>
                        <td>-</td>
                        <td>-</td>
                        <td>P2→Done</td>
                    </tr>
                    <tr>
                        <td>5-13</td>
                        <td>P1 runs 8ms, uses full TQ</td>
                        <td>-</td>
                        <td>P1</td>
                        <td>-</td>
                        <td>P1→Q1</td>
                    </tr>
                    <tr>
                        <td>13-29</td>
                        <td>P1 runs 16ms, uses full TQ</td>
                        <td>-</td>
                        <td>-</td>
                        <td>P1</td>
                        <td>P1→Q2</td>
                    </tr>
                    <tr>
                        <td>29-45</td>
                        <td>P1 runs remaining 16ms</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>P1 Done</td>
                    </tr>
                </tbody>
            </table>

            <div class="info-box">
                <strong>Key Insight:</strong>
                <p>P2 (short burst) finished quickly at high priority, while P1 (long burst) progressively got demoted.
                    This gives good response time for interactive processes!</p>
            </div>
        </section>

        <section class="content-section">
            <h2>Mathematical Analysis</h2>
            <h3>Time in Each Queue</h3>
            <div class="formula-box">
                <div class="formula">Time in Queue i = min(remaining_burst, TQ_i)</div>
                <div class="formula-desc">Process stays in queue for at most TQ_i time before demotion</div>
            </div>

            <h3>Priority Boost</h3>
            <div class="formula-box">
                <div class="formula">Every S time units: Move ALL processes to Queue 0</div>
                <div class="formula-desc">Prevents starvation by periodically resetting priorities</div>
            </div>

            <div class="example-box">
                <h4>Choosing S (Boost Period)</h4>
                <ul>
                    <li><strong>S too small:</strong> Frequent boosts, CPU-bound jobs get too much high-priority time
                    </li>
                    <li><strong>S too large:</strong> Long-running jobs may starve</li>
                    <li><strong>Typical value:</strong> S = 100ms to 1 second</li>
                </ul>
            </div>
        </section>

        <section class="content-section">
            <h2>Advantages & Disadvantages</h2>
            <div class="pros-cons">
                <div class="pros">
                    <h4>Advantages</h4>
                    <ul>
                        <li>Good response time for interactive processes</li>
                        <li>Adapts to process behavior automatically</li>
                        <li>Prevents starvation with priority boost</li>
                        <li>Balances short and long jobs</li>
                        <li>Used in real OS (Windows, macOS)</li>
                    </ul>
                </div>
                <div class="cons">
                    <h4>Disadvantages</h4>
                    <ul>
                        <li>Complex to implement and tune</li>
                        <li>Many parameters (TQ values, S, number of queues)</li>
                        <li>Can be gamed by malicious processes</li>
                        <li>Higher overhead than simple algorithms</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>
</body>

</html>